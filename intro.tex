\begin{dissertationintroduction}
% Start by giving a brief description of 
% what the hack is service composition. 
Service composition is a common practice in modern software systems, where multiple independently developed services interact with each other using predefined protocols. This practice offers many benefits: it allows services to be independently developed and maintained, leading to faster development cycles and easier updates. Additionally, individual services can be reused within an application or 
across different applications, promoting modularity and reducing code redundancy.

Despite these advantages, service composition
also introduces a new set of security challenges. Specifically, services can make inconsistent assumptions about how they interact with each other, leading to potential security vulnerabilities. Such assumptions can exist at different levels of abstraction, from low-level details like input data formats to high-level expectations about how a service will be used. 

Low-level assumptions, such as those related to input data formats, are often well-defined and expressed in the code itself. Over time, the security community has developed a variety of techniques, such as fuzzing, static analysis, and machine learning, for effectively analyzing service composition at the code level. For example, using a combination of manual analysis and fuzzing, Chen et al.~\cite{chen2020composition} identified a broad array of vulnerabilities in email systems that arose from inconsistencies in how different email services parse and display messages. This work is just one example of the many successful applications of existing techniques to identify vulnerable code in service composition.

High-level assumptions, on the other hand, are much more abstract. Consider, for example, the accessibility API in Android. A core assumption made by the API developers is that the applications using this API are indeed designed to enhance accessibility. However, in practice, this assumption is not enforced by code, and malicious applications can misuse the API to perform persistent surveillance on target devices. 

This example is one of many cases where services make assumptions about how they will be used, which do not hold in practice. Such assumptions are not easily detectable by traditional code analysis techniques, as they typically are not expressed in the code. To make matters worse, the security implications of these high-level assumptions are often not obvious when examined in isolation. Instead, a holistic understanding of interactions between services is required to fully appreciate the security risks they pose. As a result, a much smaller body of work has studied the security implications of high-level assumptions in service composition, and our understanding of these assumptions remains limited.


% high-level assumption that is not easily detectable by traditional code analysis techniques, as it does not manifest in the code itself. Assumptions like this can lead to vulnerabilities that are not easily detectable by traditional code analysis techniques, as they do not manifest in the code itself, and require a holistic understanding of the system's behavior and interactions.


My work fills this gap by highlighting the prevalence of vulnerable high-level assumptions in service composition. I show that services make vulnerable assumptions about how they will be used in three contexts: email, Android, and cross-chain bridges. These three case studies represent a wide range of service composition scenarios, from services controlled by multiple independent entities to services developed and controlled by a single entity. In every case, services make vulnerable assumptions that do not hold in practice. I further demonstrate how these assumptions can lead to severe security vulnerabilities --- they enable sophisticated attacks that are as effective as those exploiting low-level code vulnerabilities and would not be possible in isolation. 




% My work fills this gap by using a human-in-the-loop, end-to-end approach to systematically identify and analyze high-level assumptions in service composition. I focus on three case studies: email systems, Android API services, and cross-chain bridges in blockchain technology. Using this approach, I systematically identify the assumptions made by services in three systems: email, Android, and cross-chain bridges. In particular, I show such assumptions exist in a variety of context: from services controlled by three different entities (e.g., sender, forwarder, and receiver in email), to services controlled by two entities (e.g., Android API and app developer), to services controlled by a single entity (e.g., services completely developed by cross-chain bridges). I then demonstrate how these assumptions do not always hold in practice, leading to security vulnerabilities. Furthermore, I show how these vulnerabilities can be combined to create new attacks that would not be possible in isolation. Finally, I discuss and design possible mitigation strategies.

In the first case study (Chapter~\ref{chap:eurosp23}), I analyze the assumptions made by email services and demonstrate how these assumptions do not always hold in practice, leading to security vulnerabilities. I show how these vulnerabilities can be exploited to bypass email authentication mechanisms, allowing attackers to impersonate legitimate senders and forge emails.

In the second case study (Chapter~\ref{chap:pets23}), I focus on the Android API services. I identify assumptions made by Android API developers regarding how the APIs will be used and the applications that can access them. These assumptions ultimately allow malicious applications to perform persistent surveillance on target devices.

In the third case study (Chapter~\ref{chap:bridge}), I examine cross-chain bridges in the context of blockchain technology. I identify assumptions made by individual services that make up cross-chain bridges.
I demonstrate how these assumptions can fail, leading to attacks that steal funds from the bridge. I further design a simple yet effective mechanism that accounts for these assumptions and mitigates a broad range of attacks.



% I propose an end-to-end methodology for identifying and mitigating security risks in service composition. This methodology combines formal verification techniques with empirical testing to provide a comprehensive understanding of the security landscape in service-oriented architectures.


% 


% Instead, a more holistic perspective is needed to understand and mitigate the security risks associated with service composition.



% for reasoning about security vulnerabilities often focus on low-level code, such as buffer overflows or memory corruption, but these techniques are not well-suited for reasoning about the higher-level abstractions and protocols that govern service interactions.


% Component-based software design is a primary engineering
% approach for building modern software systems. This pro-
% gramming paradigm, however, creates security concerns due
% to the potential for inconsistent interpretations of messages be-
% tween different components. In this paper, we leverage such
% inconsistencies to identify vulnerabilities in email systems.
% We identify a range of techniques to induce inconsistencies
% among different components across email servers and clients.
% We show that these inconsistencies can enable attackers to
% bypass email authentication to impersonate arbitrary senders,
% and forge DKIM-signed emails with a legitimate site’s signa-
% ture. Using a combination of manual analysis and black-box
% testing, we discovered 18 types of evasion exploits and tested
% them against 10 popular email providers and 19 email clients—
% all of which proved vulnerable to various attacks. Absent
% knowledge of our attacks, for many of them even a consci-
% entious security professional using a state-of-the-art email
% provider service like Gmail cannot with confidence readily
% determine, when receiving an email, whether it is forged.

% Component-based software design [1] has been widely
% adopted as a way to manage complexity and improve reusabil-
% ity. The approach divides complex systems into smaller mod-
% ules that can be independently created and reused in different
% systems. One then combines these components together to
% achieve desired functionality. Modern software systems are
% commonly built using components made by different devel-
% opers who work independently.
% While having wide-ranging benefits, the security research
% community has recognized that this practice also introduces
% security concerns. In particular, when faced with crafted ad-
% versarial inputs, different components can have inconsistent
% interpretations when operating on the input in sequence. At-
% tackers can exploit such inconsistencies to bypass security
% policies and subvert the system’s operation

% Systems today are complex than ever. This complexity not only makes it challenging to protect existing systems against known vulnerabilities, but also introduces unintended security vulnerabilities that do not fall within the purview of current threat models. In this thesis, I highlight how unintended security vulnerabilities can arise from both the complexity within a system and the complexity introduced by the interaction between already complex systems. Using Android API system as an example, I demonstrate how the complexity within this one system produces vulnerabilities that ultimately enable malicious apps to perform persistent and stealthy surveillance on a target device. I then show, through the case study of email forwarding, how the composition of email systems leads to vulnerabilities that allow an adversary to reliably evade email security protections. I conclude by discussing my ongoing work on cryptocurrency scams and hacks, which further illustrates how the complexity of various systems can enable both large-scale and targeted attacks that result in significant financial losses.

% Nowadays, software systems are extremely complicated that are not just a simple program running on a machine. Oftentimes, it involves dozens of different pieces of software that all are talking to each other. Each piece of software will make different assumptions about how users and other pieces of software are going to use the things they expose. In practice this creates problems because an adversary does not have to play by rules and follow the assumption. I study assumptions that made these individuals pieces of software and their security implications.

% My research interests are in empirically understanding and securing real-world systems, with
% a particular emphasis on complex, large-scale systems whose vulnerabilities impact a broad range of users.
% At the core of this work is identifying the range of unvalidated assumptions systems make and how those
% assumptions may be exposed to, and thus exploitable by, attackers. While fragility in low-level code is
% well-trodden ground (e.g., how invalid assumptions about array bounds can produce control flow integrity
% vulnerabilities), my work focuses on how ambiguities and assumptions in higher-level services and service
% protocols create their own unique set of challenges – particularly in the presence of composition. As I
% show, these issues emerge in diverse contexts ranging from operating system APIs, to standard e-mail
% delivery protocols, to the systems used to manage inter-blockchain financial transactions.
% A simple example of such an issue is cloud-based e-mail filtering (e.g., as provided by third-party
% companies such as Proofpoint or Barracuda). To deploy such a capability, one must compose an existing
% email delivery service (i.e., provided by the Simple Message Transport Protocol) with a separate mail
% filtering service. Thus, inbound mail must be first diverted to the filtering service which then, after
% filtering must forward the e-mail to the destination email server. However, implicit in this arrangement
% is that this composition is somehow enforced. If not, a malicious sender might bypass this filtering service
% by simply sending messages directly to the destination server.
% Thus far, it remains a challenging task to reason about service-level assumptions like this. For one,
% studying these assumptions requires reasoning about aspects that are less well-specified (e.g., the sender
% of an email follows the intended flow). Further complicating the issue is the composition of services
% — when services are combined to create new functionality, it exposes the fragility of their underlying
% assumptions, as interactions with other services can occur in unexpected ways.
% My goal is to make systems more secure, transparent, and usable at the service level, especially those
% that are user-facing and widely-deployed. Achieving this goal requires understanding how these systems
% work in practice, which in turn requires data. To this end, I have developed a variety of tools to collect
% data, such as through large-scale measurements, reverse-engineering, and user studies. I then analyze
% the collected data, understand the system and various assumptions made, identify gaps between the
% assumptions and reality (how systems are intended to work versus how they actually work), and reason
% about the security implications of these gaps. 

\end{dissertationintroduction}